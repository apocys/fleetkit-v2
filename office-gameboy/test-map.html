<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GameBoy Map Test</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        body {
            margin: 0;
            padding: 20px;
            background: #0F380F;
            color: #9BBB0F;
            font-family: 'Press Start 2P', 'Monaco', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        h1 {
            color: #9BBB0F;
            text-align: center;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        #gameContainer {
            border: 4px solid #8BAC0F;
            background: #9BBB0F;
            position: relative;
        }
        
        #gameContainer canvas {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        .info {
            margin-top: 20px;
            font-size: 8px;
            color: #8BAC0F;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>GAMEBOY MAP TEST</h1>
    
    <div id="gameContainer"></div>
    
    <div class="info">
        Testing improved GameBoy office map with:<br>
        â€¢ Named locations (missionBoard, phoneAlarm, coffeeMachine)<br>
        â€¢ Room labels (CEO OFFICE, SERVER ROOM, MEETING ROOM, etc.)<br>
        â€¢ Desk positions for all agents<br>
        â€¢ Interactive furniture (whiteboards, computers, coffee machine, etc.)
    </div>

    <!-- PixiJS v7 from CDN -->
    <script src="../lib/pixi.min.js"></script>
    
    <!-- Mock SpawnKitNames for testing -->
    <script>
        window.SpawnKitNames = {
            resolve: (theme, id, field) => {
                const names = {
                    hunter: { title: 'HUNTER' },
                    forge: { title: 'FORGE' },
                    echo: { title: 'ECHO' },
                    atlas: { title: 'ATLAS' },
                    sentinel: { title: 'SENTINEL' }
                };
                return names[id]?.[field] || id.toUpperCase();
            },
            resolveObject: (theme, id) => {
                const objects = {
                    whiteboard: 'MISSION BOARD',
                    phone: 'PHONE',
                    coffee: 'COFFEE MACHINE',
                    mailbox: 'MAILBOX',
                    cabinet: 'FILE CABINET'
                };
                return objects[id] || id.toUpperCase();
            }
        };
    </script>
    
    <!-- GameBoy Map -->
    <script src="gameboy-map.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize PixiJS app
            const app = new PIXI.Application({
                width: 800,
                height: 600,
                backgroundColor: 0x9BBB0F
            });
            
            const gameContainer = document.getElementById('gameContainer');
            gameContainer.appendChild(app.view);
            
            // Create the office map
            const officeMap = new GameBoyOfficeMap();
            const mapContainer = new PIXI.Container();
            app.stage.addChild(mapContainer);
            
            // Render the tiles
            officeMap.renderTiles(mapContainer, app);
            
            // Add info to page
            const locations = Object.keys(officeMap.locations);
            const rooms = Object.keys(officeMap.rooms);
            
            const infoDiv = document.querySelector('.info');
            infoDiv.innerHTML += '<br><br>Locations: ' + locations.join(', ');
            infoDiv.innerHTML += '<br>Rooms: ' + rooms.join(', ');
            
            console.log('ðŸŽ® GameBoy Map Test Loaded');
            console.log('Locations:', officeMap.locations);
            console.log('Rooms:', officeMap.rooms);
        });
    </script>
</body>
</html>